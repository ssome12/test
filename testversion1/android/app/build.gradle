plugins {
    id 'com.android.application'
    id 'kotlin-android'
    // Flutter Gradle Plugin은 Android 및 Kotlin 플러그인 이후에 적용되어야 합니다.
    id 'dev.flutter.flutter-gradle-plugin'
    // Google 서비스 플러그인은 보통 파일 하단에 적용합니다.
}

android {
    // Android 8.0 이상에서는 namespace를 반드시 지정해야 합니다.
    namespace "com.Raviosa.testversion1"
    compileSdk flutter.compileSdkVersion
    ndkVersion flutter.ndkVersion

    compileOptions {
        sourceCompatibility JavaVersion.VERSION_17
        targetCompatibility JavaVersion.VERSION_17
    }

    kotlinOptions {
        jvmTarget = '17'
    }

    defaultConfig {
        // 앱의 고유 Application ID를 지정합니다.
        applicationId "com.Raviosa.testversion1"
        // minSdkVersion은 Firebase 등 라이브러리 요구사항을 만족하도록 23으로 직접 지정합니다.
        minSdkVersion 23
        targetSdkVersion flutter.targetSdkVersion
        versionCode flutter.versionCode
        versionName flutter.versionName
    }

    // 서명 설정 블록: release 빌드에 사용할 keystore 정보를 지정합니다.
    signingConfigs {
        release {
            // 예시: 절대 경로로 keystore 파일 지정
            storeFile file("C:/Users/win11test/my-release-key.jks")
            storePassword "960323"          // keystore 생성 시 설정한 비밀번호
            keyAlias "my-key-alias"          // 생성 시 지정한 alias
            keyPassword "960323"             // 키 비밀번호 (보통 storePassword와 동일)
        }
    }

    // 빌드 타입 설정 블록
    buildTypes {
        release {
            // release 빌드에 서명 설정 적용
            signingConfig signingConfigs.release
            // 릴리즈 빌드 최적화 옵션 (필요에 따라 true로 변경)
            shrinkResources false
            minifyEnabled false
            // ProGuard(코드 난독화)를 사용하려면 아래 줄의 주석을 해제하세요.
            // proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
    }
}

flutter {
    // Flutter 설정 블록: Flutter 프로젝트의 소스 경로를 지정합니다.
    source "../.."
}

dependencies {
    // Firebase BoM을 사용하여 Firebase 관련 라이브러리의 버전을 통합 관리합니다.
    implementation platform('com.google.firebase:firebase-bom:33.9.0')
    // Firebase Analytics 예시 (필요한 다른 Firebase 라이브러리는 추가 가능)
    implementation 'com.google.firebase:firebase-analytics'
}

// Google 서비스 플러그인 적용 (보통 파일 하단에 위치)
apply plugin: 'com.google.gms.google-services'
